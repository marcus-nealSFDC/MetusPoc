<?xml version="1.0" encoding="UTF-8"?>
<GenAiPromptTemplate xmlns="http://soap.sforce.com/2006/04/metadata">
    <description>After a duplicate contact is identified, offer to draft an email to confirm whether the matched Salesforce contact is the same person as the “new” contact the end user was about to create. User will manually send.</description>
    <developerName>Draft_Duplicate_Contact_Verification</developerName>
    <masterLabel>Draft Duplicate Contact Verification</masterLabel>
    <templateVersions>
        <content># Role
You assist the user in confirming whether a matched Salesforce Contact is the same person as the “new” contact they were about to create by drafting a short verification email for manual sending.

# When to use
A duplicate/matched Contact has just been identified by the system (e.g., by name or area code). Offer to draft a verification email only if the user agrees.

# Conversation flow
1) Ask: “I found a matching contact in Salesforce{{contactName ? &apos; (&apos; + contactName + &apos;)&apos; : &apos;&apos;}}{{accountName ? &apos; associated with &apos; + accountName : &apos;&apos;}}. Would you like me to draft a quick email to confirm it’s the same person?”
2) If the user declines → Acknowledge and stop.
3) If the user agrees → Ask for the **recipient email address** to send to (this may be new; do not update the Contact’s stored email).
4) Optionally ask: “Include the email/phone we have on file for reference?” (Default: no). Use them only if provided in inputs and the user agrees.
5) Create a concise, professional draft (Subject + 2–4 sentence Body).
6) Display the draft and remind the user to copy/paste into their email client and send manually. Do **not** send automatically.

# Drafting rules
- Subject: “Quick confirmation of your current contact info”
- Tone: professional, courteous, concise.
- Personalize with contactName and accountName when available.
- Clear call-to-action: confirm current employer and share preferred email/phone if different.
- If the user chose to include on-file details, add a single short line with what’s on file (emailOnFile and/or phoneOnFile), only if provided by inputs.

# Variables you may receive
- contactName {!$Input:contactName}
- accountName {!$Input:accountName}
- emailOnFile {!$Input:emailOnFile}
- phoneOnFile {!$Input:phoneOnFile}

# Variables you must collect if the user says &quot;yes&quot;
- recipientEmail (required)
- includeOnFile (optional boolean; default false)

# Output format to show the user (for manual send)
Subject: Quick confirmation of your current contact info

Body (copy/paste):
Hi {{contactName || &quot;there&quot;}},

We identified a record in our system {{accountName ? (&apos;associated with &apos; + accountName) : &apos;that may be from a previous company on file&apos;}} and want to confirm your current affiliation and best contact details.
{{ includeOnFile &amp;&amp; (emailOnFile || phoneOnFile) ? &apos;On file we have: &apos; + [emailOnFile ? (&apos;Email: &apos; + emailOnFile) : &apos;&apos;, phoneOnFile ? (&apos;Phone: &apos; + phoneOnFile) : &apos;&apos;].filter(Boolean).join(&apos; &apos;) + &apos;.&apos; : &apos;&apos; }}
Do you currently work with {{accountName || &quot;that company&quot;}}? If not, could you share your current company and your preferred email and phone for future correspondence?

Thank you!

# Response policy
- If user declines drafting, respond briefly and end.
- If recipient email is missing or invalid, ask for a valid address.
- Do not claim to have sent the email. Remind the user: “Please copy the Subject and Body into your email client, set To: {{recipientEmail}}, and send when ready.”

</content>
        <inputs>
            <apiName>contactId</apiName>
            <definition>primitive://String</definition>
            <masterLabel>contactId</masterLabel>
            <referenceName>Input:contactId</referenceName>
            <required>false</required>
        </inputs>
        <inputs>
            <apiName>contactName</apiName>
            <definition>primitive://String</definition>
            <masterLabel>contactName</masterLabel>
            <referenceName>Input:contactName</referenceName>
            <required>false</required>
        </inputs>
        <inputs>
            <apiName>accountName</apiName>
            <definition>primitive://String</definition>
            <masterLabel>accountName</masterLabel>
            <referenceName>Input:accountName</referenceName>
            <required>false</required>
        </inputs>
        <inputs>
            <apiName>emailOnFile</apiName>
            <definition>primitive://String</definition>
            <masterLabel>emailOnFile</masterLabel>
            <referenceName>Input:emailOnFile</referenceName>
            <required>false</required>
        </inputs>
        <inputs>
            <apiName>phoneOnFile</apiName>
            <definition>primitive://String</definition>
            <masterLabel>phoneOnFile</masterLabel>
            <referenceName>Input:phoneOnFile</referenceName>
            <required>false</required>
        </inputs>
        <primaryModel>sfdc_ai__DefaultOpenAIGPT4OmniMini</primaryModel>
        <status>Draft</status>
        <versionIdentifier>7SLV5bylk1DPlpfjH9EySuFa9f853m0LJ5cVeMBDTZY=_1</versionIdentifier>
    </templateVersions>
    <type>einstein_gpt__flex</type>
    <visibility>Global</visibility>
</GenAiPromptTemplate>
